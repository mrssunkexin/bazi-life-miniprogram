<!--pages/month-calendar/month-calendar.wxml-->
<view class="month-calendar-container" bindtouchstart="onTouchStart" bindtouchend="onTouchEnd">
  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <!-- æœˆå†å†…å®¹ -->
  <view wx:else class="content">
    <!-- é¡¶éƒ¨æ ‡é¢˜æ  -->
    <view class="top-header">
      <view class="logo-title">
        <text class="logo-icon">ğŸ®</text>
        <text class="title-text">è€é»„å†</text>
      </view>
    </view>

    <!-- å¹´æœˆå¯¼èˆªæ  -->
    <view class="year-month-bar">
      <view class="year-month-text">{{year}} å¹´  {{month}} æœˆ</view>
      <view class="action-buttons">
        <view wx:if="{{!isCurrentMonth}}" class="btn-today" bindtap="goToToday">å›åˆ°ä»Šå¤©</view>
        <view class="btn-choose" bindtap="onChooseAuspicious">æ‹©å‰æ—¥</view>
      </view>
    </view>

    <!-- æœˆä»½æ ‡ç­¾ -->
    <view class="month-label-section">
      <view class="month-label">{{monthLabel}}</view>
    </view>

    <!-- æ˜ŸæœŸæ ‡é¢˜è¡Œ -->
    <view class="weekday-header">
      <view class="weekday-cell">æ—¥</view>
      <view class="weekday-cell">ä¸€</view>
      <view class="weekday-cell">äºŒ</view>
      <view class="weekday-cell">ä¸‰</view>
      <view class="weekday-cell">å››</view>
      <view class="weekday-cell">äº”</view>
      <view class="weekday-cell">å…­</view>
    </view>

    <!-- æ—¥å†ç½‘æ ¼ -->
    <view class="calendar-grid">
      <!-- å ä½ç©ºç™½ï¼ˆæœˆåˆå‰çš„ç©ºæ ¼ï¼‰ -->
      <view
        wx:for="{{emptyDaysBefore}}"
        wx:key="index"
        class="day-cell day-empty"
      ></view>

      <!-- æ—¥æœŸå•å…ƒæ ¼ -->
      <view
        wx:for="{{days}}"
        wx:key="date"
        class="day-cell {{item.isToday ? 'day-today' : ''}}"
        bindtap="onDayClick"
        data-index="{{index}}"
        data-date="{{item.date}}"
        data-day="{{item.solar.day}}"
        style="background-color: {{monthBgColor}};"
      >
        <!-- èŠ‚æ°”æ ‡ç­¾ï¼ˆå¦‚æœæœ‰ï¼Œè¿‡æ»¤æ•°ä¹ï¼‰ -->
        <text wx:if="{{item.jieQiLabel}}" class="jieqi-tag">{{item.jieQiLabel}}</text>

        <!-- æµæ—¥ï¼ˆå¹²æ”¯ï¼‰ -->
        <text class="liuri-text" style="color: {{item.liuriColor}};">{{item.ganZhi.dayGan}}{{item.ganZhi.dayZhi}}</text>

        <!-- å…¬å†æ—¥æœŸï¼ˆå¤§å­—ï¼‰ -->
        <text class="solar-num">{{item.solar.day}}</text>

        <!-- å†œå†æ—¥æœŸï¼ˆå°å­—ï¼‰ -->
        <text class="lunar-day">{{item.lunar.day}}</text>
      </view>

      <!-- å ä½ç©ºç™½ï¼ˆæœˆæœ«åçš„ç©ºæ ¼ï¼‰ -->
      <view
        wx:for="{{emptyDaysAfter}}"
        wx:key="index"
        class="day-cell day-empty"
      ></view>
    </view>
  </view>
</view>
